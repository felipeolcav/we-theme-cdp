<div class="content-block post">
<div class="post-teaser teaser panel panel-default">

  <div class="header panel-heading">
    <span class="creator">
      {{#link-to 'user' creator.id}}
        <span class="creator-avatar avatar-small">{{we-avatar userId=creator.id}}</span>
        <span class="creator-name">
          {{creator.username}}
        </span>
      {{/link-to}}
    </span>
    <a {{action 'showSharedWith'}} href="#" class="shared-with text-mute">
      <span class="glyphicon glyphicon-globe"></span>
    </a>
    <span class="createdAt post-created-at">{{format-date createdAt}}</span>
  </div>

  <div class="panel-body">

    {{#if isEditing}}
      {{view App.postEditFormView}}
    {{else}}
      <div class="content">
        <div class="post-text">{{{body}}}</div>
        <div class="videos">
          {{#each videos}}
            {{we-video url=this}}
          {{/each}}
        </div>
        <div class="images">
          {{#each images}}
            <img {{bind-attr src=this.urls.large}}>
          {{/each}}
        </div>
      </div>
      <div class="footer">
          <div class="actions">
              <span class="social">
                  <button type="button" class="btn btn-xs btn-success" data-ng-click="up($event)">
                    <span class="icon icon-star-full"></span>
                  </button>
                  <button type="button" class="btn btn-xs btn-danger" data-ng-click="down($event)">
                    <span class="icon icon-star-open"></span>
                  </button>
              </span>

              <button type="button" class="btn btn-xs btn-primary">
                <span class="icon icon-share"></span> {{t 'Compartilhar'}}
              </button>

              {{#can editPost model}}
                <button type="button" class="btn btn-xs btn-warning" {{action 'edit'}}>
                  <span class="icon icon-edit-marked"></span> {{t 'Editar'}}
                </button>
              {{/can}}

              {{#can deletePost model}}
                <button class="btn btn-xs btn-danger" {{action 'deleteItem'}}>
                  <span class="icon icon-close"></span> {{t 'Deletar'}}
                </button>
              {{/can}}
          </div>
      </div>
    {{/if}}
  </div>
  <div class="panel-footer">
    {{#if hasMoreComments}}
      <div class="comments-header">
        <span>Total de {{commentCount}} comentarios.</span>

        <a {{action 'loadAllComments'}} href="#mostrar-comment" class="btn btn-default btn-xs">Mostrar todos</a>
      </div>
      <hr>
    {{/if}}
    <div class="comments">

      {{#each comments}}
        {{render 'comment/item' this}}
      {{/each}}
    </div>
    {{we-comment-form creatorId=App.currentUser.id post=model store=store}}

  </div>
</div>
</div>
